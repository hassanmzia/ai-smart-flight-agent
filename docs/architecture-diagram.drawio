<mxfile host="app.diagrams.net" modified="2026-02-13T12:00:00.000Z" agent="AI Smart Flight Agent" version="24.0.0">
  <diagram name="Technical Architecture" id="technical-architecture">
    <mxGraphModel dx="2200" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2400" pageHeight="1800" math="0" shadow="1">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ========== TITLE ========== -->
        <mxCell id="title" value="AI Smart Flight Agent - Technical Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1;fontColor=#1a237e;" vertex="1" parent="1">
          <mxGeometry x="500" y="15" width="900" height="50" as="geometry" />
        </mxCell>
        <mxCell id="subtitle" value="Multi-Agent AI Travel Planning System | Docker Compose Deployment" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#546e7a;" vertex="1" parent="1">
          <mxGeometry x="550" y="60" width="800" height="25" as="geometry" />
        </mxCell>

        <!-- ========== CLIENT LAYER ========== -->
        <mxCell id="client-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;strokeWidth=2;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="1850" height="100" as="geometry" />
        </mxCell>
        <mxCell id="client-label" value="CLIENT LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="60" y="103" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="browser" value="Web Browser" style="shape=mxgraph.aws4.client;whiteSpace=wrap;html=1;fillColor=#232F3E;fontColor=#ffffff;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="250" y="115" width="80" height="70" as="geometry" />
        </mxCell>
        <mxCell id="mobile" value="Mobile App" style="shape=mxgraph.aws4.mobile_client;whiteSpace=wrap;html=1;fillColor=#232F3E;fontColor=#ffffff;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="400" y="115" width="80" height="70" as="geometry" />
        </mxCell>
        <mxCell id="api-client" value="API Client" style="shape=mxgraph.aws4.client;whiteSpace=wrap;html=1;fillColor=#232F3E;fontColor=#ffffff;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="550" y="115" width="80" height="70" as="geometry" />
        </mxCell>

        <mxCell id="protocols" value="HTTPS / WSS / REST" style="text;html=1;strokeColor=none;fillColor=#BBDEFB;align=center;verticalAlign=middle;fontSize=10;fontStyle=1;rounded=1;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="740" y="138" width="160" height="24" as="geometry" />
        </mxCell>

        <!-- ========== REVERSE PROXY LAYER ========== -->
        <mxCell id="nginx-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#616161;strokeWidth=2;dashed=1;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="50" y="230" width="1850" height="90" as="geometry" />
        </mxCell>
        <mxCell id="proxy-label" value="REVERSE PROXY LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#616161;" vertex="1" parent="1">
          <mxGeometry x="60" y="233" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="nginx" value="Nginx Reverse Proxy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#455A64;strokeColor=#263238;fontColor=#ffffff;fontSize=13;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="253" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nginx-details" value="Port 80/443 | SSL Termination | Gzip | Security Headers | WebSocket Upgrade" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=9;fontColor=#78909C;" vertex="1" parent="1">
          <mxGeometry x="650" y="263" width="400" height="20" as="geometry" />
        </mxCell>

        <mxCell id="route-frontend" value="/ --> :3090" style="text;html=1;strokeColor=none;fillColor=#E8F5E9;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="1100" y="245" width="100" height="18" as="geometry" />
        </mxCell>
        <mxCell id="route-api" value="/api/ --> :8109" style="text;html=1;strokeColor=none;fillColor=#FFF3E0;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="1210" y="245" width="110" height="18" as="geometry" />
        </mxCell>
        <mxCell id="route-ws" value="/ws/ --> :8109" style="text;html=1;strokeColor=none;fillColor=#E8EAF6;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#283593;" vertex="1" parent="1">
          <mxGeometry x="1330" y="245" width="110" height="18" as="geometry" />
        </mxCell>
        <mxCell id="route-mcp" value="/mcp/ --> :8107" style="text;html=1;strokeColor=none;fillColor=#FCE4EC;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="1450" y="245" width="110" height="18" as="geometry" />
        </mxCell>
        <mxCell id="route-static" value="/static/ & /media/" style="text;html=1;strokeColor=none;fillColor=#ECEFF1;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#37474F;" vertex="1" parent="1">
          <mxGeometry x="1570" y="245" width="120" height="18" as="geometry" />
        </mxCell>

        <!-- ========== APPLICATION LAYER ========== -->
        <mxCell id="app-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;strokeWidth=2;dashed=1;opacity=20;" vertex="1" parent="1">
          <mxGeometry x="50" y="350" width="1850" height="420" as="geometry" />
        </mxCell>
        <mxCell id="app-label" value="APPLICATION LAYER (Docker Containers)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="60" y="353" width="300" height="20" as="geometry" />
        </mxCell>

        <!-- Frontend Container -->
        <mxCell id="frontend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="385" width="380" height="370" as="geometry" />
        </mxCell>
        <mxCell id="frontend-title" value="Frontend Application" style="text;html=1;strokeColor=none;fillColor=#2E7D32;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#ffffff;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="390" width="360" height="28" as="geometry" />
        </mxCell>
        <mxCell id="fe-port" value="Port: 3090" style="text;html=1;strokeColor=none;fillColor=#FFEB3B;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="392" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="fe-react" value="React 18 + TypeScript + Vite" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="425" width="340" height="28" as="geometry" />
        </mxCell>
        <mxCell id="fe-state" value="Zustand (Auth, Booking, Notification, Search Stores)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="90" y="458" width="340" height="24" as="geometry" />
        </mxCell>
        <mxCell id="fe-query" value="React Query (Server State) + Axios (HTTP Client)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="90" y="487" width="340" height="24" as="geometry" />
        </mxCell>
        <mxCell id="fe-tailwind" value="TailwindCSS + Dark Mode Support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="90" y="516" width="340" height="24" as="geometry" />
        </mxCell>

        <!-- Frontend pages list -->
        <mxCell id="fe-pages-label" value="32 Pages" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=5;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="90" y="545" width="60" height="16" as="geometry" />
        </mxCell>
        <mxCell id="fe-p1" value="Home" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="90" y="564" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p2" value="AI Planner" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="145" y="564" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p3" value="Flights" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="215" y="564" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p4" value="Hotels" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="270" y="564" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p5" value="Bookings" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="325" y="564" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p6" value="Dashboard" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="90" y="586" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p7" value="Cars" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="160" y="586" width="40" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p8" value="Restaurants" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="205" y="586" width="70" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p9" value="Weather" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="280" y="586" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p10" value="Itinerary" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="335" y="586" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p11" value="Events" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="90" y="608" width="45" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p12" value="Shopping" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="140" y="608" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p13" value="Safety" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="200" y="608" width="45" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p14" value="Commute" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="250" y="608" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="fe-p15" value="Payment" style="rounded=1;html=1;fillColor=#A5D6A7;strokeColor=#388E3C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="310" y="608" width="55" height="18" as="geometry" />
        </mxCell>

        <mxCell id="fe-services" value="20 Service Modules | WebSocket Client | JWT Interceptor" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#388E3C;fontSize=9;fontStyle=1;fontColor=#1B5E20;" vertex="1" parent="1">
          <mxGeometry x="90" y="633" width="340" height="22" as="geometry" />
        </mxCell>
        <mxCell id="fe-chat" value="AI Agent Chat Widget (Floating)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#66BB6A;strokeColor=#2E7D32;fontSize=9;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="90" y="660" width="340" height="22" as="geometry" />
        </mxCell>

        <!-- Backend Container -->
        <mxCell id="backend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="385" width="540" height="370" as="geometry" />
        </mxCell>
        <mxCell id="backend-title" value="Backend API Server" style="text;html=1;strokeColor=none;fillColor=#E65100;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#ffffff;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="390" width="520" height="28" as="geometry" />
        </mxCell>
        <mxCell id="be-port" value="Port: 8109" style="text;html=1;strokeColor=none;fillColor=#FFEB3B;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="930" y="392" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="be-django" value="Django 5.0 + Django REST Framework" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="425" width="250" height="26" as="geometry" />
        </mxCell>
        <mxCell id="be-gunicorn" value="Gunicorn (4 Workers)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="760" y="425" width="140" height="26" as="geometry" />
        </mxCell>

        <mxCell id="be-auth" value="JWT Auth (SimpleJWT)&#10;Access: 1h | Refresh: 7d" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#EF6C00;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="500" y="458" width="160" height="35" as="geometry" />
        </mxCell>
        <mxCell id="be-channels" value="Django Channels&#10;WebSocket (Daphne)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#EF6C00;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="668" y="458" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="be-docs" value="OpenAPI/Swagger&#10;drf-spectacular" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#EF6C00;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="816" y="458" width="120" height="35" as="geometry" />
        </mxCell>

        <!-- Django Apps Grid -->
        <mxCell id="be-apps-label" value="19 Django Applications:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=5;fontColor=#BF360C;" vertex="1" parent="1">
          <mxGeometry x="500" y="500" width="150" height="16" as="geometry" />
        </mxCell>
        <mxCell id="ba1" value="users" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="500" y="520" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba2" value="agents" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="560" y="520" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba3" value="flights" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="620" y="520" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba4" value="hotels" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="680" y="520" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba5" value="bookings" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="740" y="520" width="60" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba6" value="payments" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="805" y="520" width="60" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba7" value="itineraries" style="rounded=1;html=1;fillColor=#FFB74D;strokeColor=#E65100;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="870" y="520" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba8" value="notifications" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="500" y="542" width="75" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba9" value="reviews" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="580" y="542" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba10" value="analytics" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="635" y="542" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba11" value="car_rentals" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="695" y="542" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba12" value="restaurants" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="765" y="542" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba13" value="attractions" style="rounded=1;html=1;fillColor=#FF8A65;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="835" y="542" width="65" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba14" value="weather" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="500" y="564" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba15" value="events" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="560" y="564" width="50" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba16" value="shopping" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="615" y="564" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba17" value="safety" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="675" y="564" width="45" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba18" value="commute" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="725" y="564" width="55" height="18" as="geometry" />
        </mxCell>
        <mxCell id="ba19" value="tourist_attractions" style="rounded=1;html=1;fillColor=#FFAB91;strokeColor=#BF360C;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="785" y="564" width="100" height="18" as="geometry" />
        </mxCell>

        <!-- Celery -->
        <mxCell id="celery-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F57F17;strokeWidth=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="590" width="500" height="65" as="geometry" />
        </mxCell>
        <mxCell id="celery-worker" value="Celery Worker&#10;4 Concurrent Workers&#10;Async Task Processing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFD54F;strokeColor=#F57F17;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="510" y="595" width="170" height="52" as="geometry" />
        </mxCell>
        <mxCell id="celery-beat" value="Celery Beat&#10;Scheduled Tasks&#10;DB Scheduler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFD54F;strokeColor=#F57F17;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="690" y="595" width="150" height="52" as="geometry" />
        </mxCell>
        <mxCell id="celery-results" value="django-celery-results&#10;django-celery-beat" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFECB3;strokeColor=#F57F17;fontSize=8;" vertex="1" parent="1">
          <mxGeometry x="850" y="600" width="140" height="40" as="geometry" />
        </mxCell>

        <!-- REST API endpoints -->
        <mxCell id="api-endpoints" value="REST API: /api/auth/* | /api/flights/* | /api/hotels/* | /api/bookings/* | /api/agents/* | /api/itineraries/* | ..." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF6F00;strokeColor=#E65100;fontSize=9;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="500" y="662" width="500" height="22" as="geometry" />
        </mxCell>

        <!-- Backend WS -->
        <mxCell id="be-ws-label" value="WebSocket: /ws/notifications/ | /ws/agent/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BF360C;strokeColor=#BF360C;fontSize=9;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="500" y="688" width="500" height="20" as="geometry" />
        </mxCell>

        <!-- MCP Server Container -->
        <mxCell id="mcp-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#C62828;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="385" width="340" height="230" as="geometry" />
        </mxCell>
        <mxCell id="mcp-title" value="MCP Server (Agent-to-Agent)" style="text;html=1;strokeColor=none;fillColor=#C62828;align=center;verticalAlign=middle;fontSize=13;fontStyle=1;fontColor=#ffffff;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="390" width="320" height="28" as="geometry" />
        </mxCell>
        <mxCell id="mcp-port" value="Port: 8107" style="text;html=1;strokeColor=none;fillColor=#FFEB3B;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1300" y="392" width="70" height="20" as="geometry" />
        </mxCell>

        <mxCell id="mcp-fastapi" value="FastAPI + Uvicorn" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C62828;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1070" y="425" width="300" height="26" as="geometry" />
        </mxCell>
        <mxCell id="mcp-register" value="Agent Registration&#10;(Flight, Hotel, Goal, Utility, Manager)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F48FB1;strokeColor=#AD1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1070" y="458" width="300" height="32" as="geometry" />
        </mxCell>
        <mxCell id="mcp-messaging" value="Message Routing&#10;Request/Response/Notification/Error" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F48FB1;strokeColor=#AD1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1070" y="496" width="145" height="32" as="geometry" />
        </mxCell>
        <mxCell id="mcp-context" value="Shared Context&#10;Session-scoped TTL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F48FB1;strokeColor=#AD1457;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1225" y="496" width="145" height="32" as="geometry" />
        </mxCell>
        <mxCell id="mcp-ws" value="WebSocket /ws/{agent_id} | Redis Pub/Sub Queues" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E91E63;strokeColor=#880E4F;fontSize=9;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1070" y="536" width="300" height="22" as="geometry" />
        </mxCell>
        <mxCell id="mcp-conn-mgr" value="ConnectionManager (Active WebSocket Pool + Broadcast)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EC407A;strokeColor=#880E4F;fontSize=8;fontColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1070" y="564" width="300" height="20" as="geometry" />
        </mxCell>

        <!-- ========== AI / AGENT LAYER ========== -->
        <mxCell id="ai-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EDE7F6;strokeColor=#4527A0;strokeWidth=2;dashed=1;opacity=20;" vertex="1" parent="1">
          <mxGeometry x="50" y="800" width="1850" height="310" as="geometry" />
        </mxCell>
        <mxCell id="ai-label" value="AI / MULTI-AGENT LAYER (LangGraph Orchestration)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#4527A0;" vertex="1" parent="1">
          <mxGeometry x="60" y="803" width="400" height="20" as="geometry" />
        </mxCell>

        <!-- LangGraph Workflow -->
        <mxCell id="langgraph-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D1C4E9;strokeColor=#4527A0;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="830" width="1320" height="260" as="geometry" />
        </mxCell>
        <mxCell id="langgraph-title" value="LangGraph StateGraph Workflow (Sequential Pipeline)" style="text;html=1;strokeColor=none;fillColor=#4527A0;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#ffffff;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="835" width="400" height="24" as="geometry" />
        </mxCell>
        <mxCell id="langgraph-model" value="LLM: OpenAI GPT-4o-mini | Temp: 0.7" style="text;html=1;strokeColor=none;fillColor=#B39DDB;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;fontColor=#311B92;" vertex="1" parent="1">
          <mxGeometry x="500" y="835" width="250" height="20" as="geometry" />
        </mxCell>

        <!-- Search Agents Row -->
        <mxCell id="search-label" value="Search Agents:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=1;fontColor=#4527A0;" vertex="1" parent="1">
          <mxGeometry x="90" y="865" width="100" height="16" as="geometry" />
        </mxCell>

        <mxCell id="agent-flight" value="Flight Agent&#10;SerpAPI Google Flights&#10;City-to-IATA Resolver" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7E57C2;strokeColor=#4527A0;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="885" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-hotel" value="Hotel Agent&#10;SerpAPI Google Hotels&#10;Airport-to-City Mapper" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7E57C2;strokeColor=#4527A0;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="265" y="885" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-car" value="Car Rental Agent&#10;SerpAPI Google Local&#10;Multi-city Support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7E57C2;strokeColor=#4527A0;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="440" y="885" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-restaurant" value="Restaurant Agent&#10;SerpAPI Google Local&#10;Cuisine Filtering" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#7E57C2;strokeColor=#4527A0;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="615" y="885" width="160" height="55" as="geometry" />
        </mxCell>

        <!-- Arrows between search agents -->
        <mxCell id="a-f2h" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4527A0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-flight" target="agent-hotel">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a-h2c" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4527A0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-hotel" target="agent-car">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a-c2r" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4527A0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-car" target="agent-restaurant">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Evaluation Agents Row -->
        <mxCell id="eval-label" value="Evaluation Agents:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=10;fontStyle=1;fontColor=#4527A0;" vertex="1" parent="1">
          <mxGeometry x="90" y="950" width="120" height="16" as="geometry" />
        </mxCell>

        <mxCell id="agent-goal" value="Goal-Based Agent&#10;Budget Evaluation&#10;Penalty/Reward Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#AB47BC;strokeColor=#6A1B9A;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="90" y="970" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-utility" value="Utility-Based Agent&#10;Hotel Ranking&#10;Price+Rating Score" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#AB47BC;strokeColor=#6A1B9A;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="265" y="970" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-car-eval" value="Car Rental Evaluator&#10;Price+Type+Rating&#10;Utility Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#AB47BC;strokeColor=#6A1B9A;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="440" y="970" width="160" height="55" as="geometry" />
        </mxCell>
        <mxCell id="agent-rest-eval" value="Restaurant Evaluator&#10;Rating+Price+Reviews&#10;Utility Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#AB47BC;strokeColor=#6A1B9A;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="615" y="970" width="160" height="55" as="geometry" />
        </mxCell>

        <!-- Arrows between eval agents -->
        <mxCell id="a-g2u" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6A1B9A;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-goal" target="agent-utility">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a-u2ce" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6A1B9A;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-utility" target="agent-car-eval">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="a-ce2re" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#6A1B9A;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-car-eval" target="agent-rest-eval">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Manager Agent -->
        <mxCell id="agent-manager" value="Manager Agent&#10;Final Orchestration &amp; Recommendation Compilation&#10;Total Cost Calculation | Top 5 Rankings" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6A1B9A;strokeColor=#4A148C;fontSize=10;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="800" y="960" width="280" height="70" as="geometry" />
        </mxCell>

        <!-- Arrow from rest-eval to manager -->
        <mxCell id="a-re2m" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4A148C;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-rest-eval" target="agent-manager">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- LangGraph State -->
        <mxCell id="state-box" value="TravelAgentState (Shared)&#10;messages | user_query | origin | destination | dates | budget | cuisine&#10;flight_results | hotel_results | car_rental_results | restaurant_results&#10;goal_evaluation | utility_evaluation | car_evaluation | restaurant_evaluation | final_recommendation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EDE7F6;strokeColor=#4527A0;fontSize=8;align=left;" vertex="1" parent="1">
          <mxGeometry x="90" y="1040" width="500" height="42" as="geometry" />
        </mxCell>

        <!-- Enhanced Orchestrator -->
        <mxCell id="enhanced-orch" value="Enhanced Orchestrator&#10;RAG Pipeline | ThreadPoolExecutor (8 workers)&#10;Health/Visa/Packing/LocalExpert Agents&#10;Redis Caching | Itinerary Synthesis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#9575CD;strokeColor=#4527A0;fontSize=9;fontStyle=1;fontColor=#ffffff;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="610" y="1035" width="250" height="55" as="geometry" />
        </mxCell>

        <!-- END node -->
        <mxCell id="end-node" value="END" style="ellipse;whiteSpace=wrap;html=1;fillColor=#4A148C;strokeColor=#311B92;fontSize=11;fontStyle=1;fontColor=#ffffff;" vertex="1" parent="1">
          <mxGeometry x="1100" y="980" width="60" height="35" as="geometry" />
        </mxCell>
        <mxCell id="a-m2end" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;strokeWidth=2;strokeColor=#4A148C;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="agent-manager" target="end-node">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ========== DATA LAYER ========== -->
        <mxCell id="data-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#0D47A1;strokeWidth=2;dashed=1;opacity=20;" vertex="1" parent="1">
          <mxGeometry x="50" y="1130" width="1850" height="200" as="geometry" />
        </mxCell>
        <mxCell id="data-label" value="DATA &amp; MESSAGING LAYER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#0D47A1;" vertex="1" parent="1">
          <mxGeometry x="60" y="1133" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="postgres-db" value="PostgreSQL 15" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=12;fillColor=#42A5F5;strokeColor=#0D47A1;fontColor=#ffffff;fontSize=12;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="1165" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="pg-details" value="Port: 5438&#10;Users, Bookings, Payments,&#10;Itineraries, Reviews, Analytics&#10;conn_max_age=600" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;fontSize=8;fontColor=#0D47A1;" vertex="1" parent="1">
          <mxGeometry x="90" y="1250" width="180" height="55" as="geometry" />
        </mxCell>

        <mxCell id="redis-db" value="Redis 7" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=12;fillColor=#FFA726;strokeColor=#E65100;fontColor=#ffffff;fontSize=12;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="1165" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="redis-details" value="Port: 6384&#10;DB 0: Django Cache&#10;DB 1: Channels + MCP&#10;Agent Queues &amp; Context" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;fontSize=8;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="370" y="1250" width="180" height="55" as="geometry" />
        </mxCell>

        <mxCell id="rabbitmq-db" value="RabbitMQ 3.12" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=12;fillColor=#EF5350;strokeColor=#B71C1C;fontColor=#ffffff;fontSize=12;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="1165" width="160" height="80" as="geometry" />
        </mxCell>
        <mxCell id="rmq-details" value="AMQP: 5673 | Mgmt: 15673&#10;Celery Broker&#10;Task Queue&#10;Management Alpine" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=top;fontSize=8;fontColor=#B71C1C;" vertex="1" parent="1">
          <mxGeometry x="650" y="1250" width="180" height="55" as="geometry" />
        </mxCell>

        <!-- Volumes -->
        <mxCell id="volumes-box" value="Docker Volumes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="920" y="1175" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="vol-list" value="postgres_data | redis_data | rabbitmq_data | static_volume | media_volume" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=8;fontColor=#455A64;" vertex="1" parent="1">
          <mxGeometry x="925" y="1200" width="240" height="25" as="geometry" />
        </mxCell>

        <!-- Network -->
        <mxCell id="network-box" value="travel-network (bridge)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#283593;fontSize=11;fontStyle=1;fontColor=#283593;" vertex="1" parent="1">
          <mxGeometry x="920" y="1250" width="250" height="30" as="geometry" />
        </mxCell>

        <!-- ========== EXTERNAL SERVICES LAYER ========== -->
        <mxCell id="ext-layer" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F57F17;strokeWidth=2;dashed=1;opacity=20;" vertex="1" parent="1">
          <mxGeometry x="1420" y="385" width="460" height="370" as="geometry" />
        </mxCell>
        <mxCell id="ext-label" value="EXTERNAL SERVICES &amp; APIs" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontStyle=1;fontColor=#F57F17;" vertex="1" parent="1">
          <mxGeometry x="1430" y="388" width="200" height="20" as="geometry" />
        </mxCell>

        <mxCell id="ext-openai" value="OpenAI API&#10;GPT-4o-mini&#10;LLM Processing &amp; NLP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFD54F;strokeColor=#F57F17;fontSize=9;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="415" width="200" height="48" as="geometry" />
        </mxCell>
        <mxCell id="ext-serpapi" value="SerpAPI&#10;Google Flights | Google Hotels&#10;Google Local (Cars &amp; Restaurants)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFD54F;strokeColor=#F57F17;fontSize=9;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="472" width="200" height="55" as="geometry" />
        </mxCell>
        <mxCell id="ext-stripe" value="Stripe API&#10;Payment Processing&#10;Publishable + Secret Keys" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCA28;strokeColor=#F57F17;fontSize=9;fontStyle=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="536" width="200" height="48" as="geometry" />
        </mxCell>
        <mxCell id="ext-weather" value="Weather API&#10;Forecast Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCA28;strokeColor=#F57F17;fontSize=9;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="593" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ext-smtp" value="SMTP (Gmail)&#10;Email Notifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCA28;strokeColor=#F57F17;fontSize=9;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1545" y="593" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="ext-elevenlabs" value="ElevenLabs&#10;Voice TTS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCA28;strokeColor=#F57F17;fontSize=9;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="642" width="95" height="40" as="geometry" />
        </mxCell>

        <!-- External env vars -->
        <mxCell id="ext-env" value="Environment Variables&#10;OPENAI_API_KEY | SERP_API_KEY&#10;STRIPE_SECRET_KEY | STRIPE_PUBLISHABLE_KEY&#10;WEATHER_API_KEY | ELEVENLABS_API_KEY" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;fontSize=8;align=left;" vertex="1" parent="1">
          <mxGeometry x="1440" y="690" width="200" height="55" as="geometry" />
        </mxCell>

        <!-- Security box -->
        <mxCell id="security-box" value="Security (Production)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#C62828;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1660" y="415" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="security-details" value="SSL Redirect | HSTS 1yr&#10;XSS Filter | X-Frame DENY&#10;CSRF Protection | Secure Cookies&#10;Content-Type Nosniff" style="text;html=1;strokeColor=none;fillColor=#FFEBEE;align=left;verticalAlign=middle;fontSize=8;fontColor=#C62828;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1660" y="450" width="200" height="55" as="geometry" />
        </mxCell>

        <!-- Monitoring -->
        <mxCell id="monitoring-box" value="Logging &amp; Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#283593;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1660" y="520" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="monitoring-details" value="RotatingFileHandler (10MB x 10)&#10;Console + File logging&#10;Health Checks on all services&#10;Docker restart: unless-stopped" style="text;html=1;strokeColor=none;fillColor=#E8EAF6;align=left;verticalAlign=middle;fontSize=8;fontColor=#283593;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1660" y="555" width="200" height="55" as="geometry" />
        </mxCell>

        <!-- ========== KEY CONNECTIONS ========== -->
        <!-- Client to Nginx -->
        <mxCell id="c-client2nginx" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#455A64;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="browser" target="nginx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Nginx to Frontend -->
        <mxCell id="c-nginx2fe" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#388E3C;" edge="1" parent="1" source="nginx" target="frontend-container">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Nginx to Backend -->
        <mxCell id="c-nginx2be" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#E65100;" edge="1" parent="1" source="nginx" target="backend-container">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Nginx to MCP -->
        <mxCell id="c-nginx2mcp" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#C62828;" edge="1" parent="1" source="nginx" target="mcp-container">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Frontend to Backend (API) -->
        <mxCell id="c-fe2be" value="REST API + JWT" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#1565C0;dashed=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;" edge="1" parent="1" source="frontend-container" target="backend-container">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Backend to Agents -->
        <mxCell id="c-be2agents" value="Invokes" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#4527A0;dashed=1;" edge="1" parent="1" source="backend-container" target="langgraph-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Backend to PostgreSQL -->
        <mxCell id="c-be2pg" value="ORM" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#0D47A1;" edge="1" parent="1" source="backend-container" target="postgres-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Backend to Redis -->
        <mxCell id="c-be2redis" value="Cache" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#E65100;" edge="1" parent="1" source="backend-container" target="redis-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- Backend to RabbitMQ -->
        <mxCell id="c-be2rmq" value="AMQP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#B71C1C;" edge="1" parent="1" source="celery-worker" target="rabbitmq-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- MCP to Redis -->
        <mxCell id="c-mcp2redis" value="Pub/Sub" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#E65100;dashed=1;" edge="1" parent="1" source="mcp-container" target="redis-db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Agents to External -->
        <mxCell id="c-agents2ext" value="API Calls" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;strokeWidth=2;strokeColor=#F57F17;dashed=1;" edge="1" parent="1" source="langgraph-box" target="ext-serpapi">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ========== LEGEND ========== -->
        <mxCell id="legend-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FAFAFA;strokeColor=#9E9E9E;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="1420" y="1130" width="460" height="200" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="LEGEND" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontSize=12;fontStyle=1;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="1580" y="1135" width="100" height="20" as="geometry" />
        </mxCell>

        <mxCell id="leg-frontend" value="Frontend (React)" style="rounded=1;html=1;fillColor=#E8F5E9;strokeColor=#388E3C;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1160" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-backend" value="Backend (Django)" style="rounded=1;html=1;fillColor=#FFF3E0;strokeColor=#E65100;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1550" y="1160" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-mcp" value="MCP (FastAPI)" style="rounded=1;html=1;fillColor=#FCE4EC;strokeColor=#C62828;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1660" y="1160" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-agents" value="AI Agents" style="rounded=1;html=1;fillColor=#EDE7F6;strokeColor=#4527A0;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1770" y="1160" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-data" value="Data Store" style="shape=cylinder3;html=1;fillColor=#42A5F5;strokeColor=#0D47A1;fontSize=9;fontColor=#fff;size=8;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1190" width="80" height="40" as="geometry" />
        </mxCell>
        <mxCell id="leg-external" value="External API" style="rounded=1;html=1;fillColor=#FFD54F;strokeColor=#F57F17;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="1530" y="1200" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-solid" value="_____ Direct" style="text;html=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="1625" y="1195" width="80" height="16" as="geometry" />
        </mxCell>
        <mxCell id="leg-dashed" value="- - - - Indirect" style="text;html=1;strokeColor=none;fillColor=none;fontSize=9;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="1625" y="1212" width="80" height="16" as="geometry" />
        </mxCell>

        <mxCell id="leg-port-info" value="Ports: Frontend=3090 | Backend=8109 | MCP=8107 | Postgres=5438 | Redis=6384 | RabbitMQ=5673/15673" style="text;html=1;strokeColor=none;fillColor=#FFEB3B;align=center;verticalAlign=middle;fontSize=9;fontStyle=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1245" width="420" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-docker" value="All services containerized with Docker Compose | Network: travel-network (bridge)" style="text;html=1;strokeColor=none;fillColor=#E0E0E0;align=center;verticalAlign=middle;fontSize=9;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1270" width="420" height="20" as="geometry" />
        </mxCell>
        <mxCell id="leg-tech" value="Python 3.11 | Node 20 | LangChain + LangGraph | TypeScript 5 | TailwindCSS 3" style="text;html=1;strokeColor=none;fillColor=#E0E0E0;align=center;verticalAlign=middle;fontSize=9;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="1295" width="420" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
